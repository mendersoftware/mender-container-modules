stages:
  - test

include:
  - component: gitlab.com/Northern.tech/Mender/mendertesting/commit-lint@master
  - project: 'Northern.tech/Mender/mendertesting'
    file:
      # QA-1046 Remove after hardening sign-off checks in the modern commit linter
      - '.gitlab-ci-check-commits-signoffs.yml'
      - '.gitlab-ci-check-license.yml'
      - '.gitlab-ci-github-status-updates.yml'
      - '.gitlab-ci-check-shell-format.yml'

test:check-shell-formatting:
  before_script:
    - SHELL_SCRIPTS="src/docker-compose src/gen_docker-compose tests/test_docker-compose.sh"

test:unit-tests:
  image: ${CI_DEPENDENCY_PROXY_DIRECT_GROUP_IMAGE_PREFIX}/debian:13
  tags:
    - oslo-xps
  before_script:
    - apt-get update
    - apt-get -yyq install bash jq tar gzip
  script:
    - tests/test_docker-compose.sh
